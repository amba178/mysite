
jQuery(function() { 

	$('body').prepend('<div id="fb-root"></div>')

	$.ajax({
		url: "http://connect.facebook.net/en_US/all.js",
		dataType: 'script',
		cache: true
	});
});

window.fbAsyncInit = function(){ 

	FB.init({appId: '<%= ENV["FACEBOOK_API_ID"] %>', cookie: true});
	
	$('#sign-in').click(function(e) {
		e.preventDefault()
		FB.login(function(response) {
  			if (response.authResponse) {
    		 return window.location = '/auth/facebook/callback';
  			}
		});
	});

	$('#sign-out').click(function(e) {
 		 FB.getLoginStatus(function(response) {
    	if (response.authResponse) {
     	 return FB.logout();
    	}
  	});
  		return true;
	});   
}